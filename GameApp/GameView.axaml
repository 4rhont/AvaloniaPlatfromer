<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:GameApp.Core.ViewModels;assembly=GameApp.Core"
		xmlns:converters="clr-namespace:GameApp.Converters"
		xmlns:views="clr-namespace:GameApp.Views"
		xmlns:vmAnim="clr-namespace:GameApp.ViewModels;assembly=GameApp"
	    x:Class="GameApp.Views.GameView"
	    x:DataType="vm:GameViewModel"
	    Title="Platformer - Textures"
	    Width="1920" Height="1080"
	    Focusable="True">
	<Window.Resources>
		<converters:BoolToScaleXConverter x:Key="BoolToScaleConverter"/>
	</Window.Resources>
	<Canvas x:Name="MainCanvas" Background="DarkBlue">

		<Rectangle Canvas.Left="0" Canvas.Top="0"
					Width="1920" Height="1080"
					Fill="Transparent"
					Stroke="Gray"
					StrokeThickness="1"
					StrokeDashArray="5,5"/>

		<Image x:Name="PlayerImage"
			   x:DataType="vmAnim:PlayerAnimationViewModel"
			   Width="{Binding VisualWidth}"
			   Height="{Binding VisualHeight}"
			   Canvas.Left="{Binding VisualX}"
			   Canvas.Top="{Binding VisualY}"
			   Stretch="Fill"
			   Source="{Binding CurrentFrameBitmap}"
			   RenderTransformOrigin="50%,50%">
			<Image.RenderTransform>
				<ScaleTransform ScaleX="{Binding IsFacingRight, Converter={StaticResource BoolToScaleConverter}}"
								ScaleY="1"/>
			</Image.RenderTransform>
		</Image>

		<TextBlock
			Canvas.Left="10"
			Canvas.Top="10"
			Width="500"
			Text="{Binding DebugInfo}"
			Foreground="Black"
			FontSize="14"
			TextWrapping="Wrap"/>
		<!-- Погода -->
		<views:WeatherLayer Canvas.Left="0" Canvas.Top="0"
                        Width="1920" Height="1080"/>
		<!-- Подсказка по управлению -->
		<TextBlock Canvas.Left="10" Canvas.Top="1040"
                   Text="Controls: WASD or arrows, Space to jump"
                   Foreground="Black" FontSize="14"/>

		<Canvas x:Name="DebugCanvas"
		  Canvas.ZIndex="1000"
        IsHitTestVisible="False"/>
	</Canvas>
</Window>